---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import { SITE, HOME, SOCIALS } from "@consts";
import ArrowCard from "@components/ArrowCard.astro";
import Link from "@components/Link.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

const blog = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE);

const projects: CollectionEntry<"projects">[] = (
  await getCollection("projects")
)
  .filter((project) => !project.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_PROJECTS_ON_HOMEPAGE);
---

<Layout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <aside data-pagefind-ignore>
      <h1 class="animate text-2xl font-semibold text-black dark:text-white">
        Hi there, I'm Paolo Zanotti ğŸ‘‹ğŸ»
      </h1>
      <div class="space-y-16">
        <section>
          <article class="space-y-4">
            <span class="animate">
              <p>
                My name is Paolo and I'm a computer engineering student at UniBg
                and a software engineer from Bergamo. ğŸ‡®ğŸ‡¹
                <br />I like to write code, play CTF challenges and read books.
                I'm very into computer science, renewable energy and biomedical
                engineering (and generally the whole engineering world). I'm
                always looking for something new to learn! ğŸ‘€
              </p>
              <p>
                Right now I'm working as a freelance software engineer. ğŸ‘¨ğŸ»â€ğŸ’»
                <br />
                Want to know more? Look at my projects below and contact me! ğŸ’¬
              </p>
            </span>
          </article>
        </section>

        <section class="animate space-y-6">
          <div class="flex flex-wrap items-center justify-between gap-y-2">
            <h2 class="text-xl font-semibold text-black dark:text-white">
              Latest posts ğŸ’¬
            </h2>
            <Link href="/blog"> See all posts </Link>
          </div>
          <ul class="not-prose flex flex-col gap-4">
            {
              blog.map((post) => (
                <li>
                  <ArrowCard entry={post} />
                </li>
              ))
            }
          </ul>
        </section>

        <section class="animate space-y-6">
          <div class="flex flex-wrap items-center justify-between gap-y-2">
            <h2 class="text-xl font-semibold text-black dark:text-white">
              Recent projects ğŸ’»
            </h2>
            <Link href="/projects"> See all projects </Link>
          </div>
          <ul class="not-prose flex flex-col gap-4">
            {
              projects.map((project) => (
                <li>
                  <ArrowCard entry={project} />
                </li>
              ))
            }
          </ul>
        </section>

        <section class="animate space-y-4">
          <h2 class="text-xl font-semibold text-black dark:text-white">
            Get in touch âœï¸
          </h2>
          <article>
            <p>
              If you want to get in touch with me to talk about a project, write
              me an email at <Link
                href={`mailto:${SITE.EMAIL}`}
                aria-label={`Email ${SITE.TITLE}`}
              >
                {SITE.EMAIL}
              </Link> or reach out on social media list below in the footer.
            </p>
          </article>
        </section>
      </div>
    </aside>
  </Container>
</Layout>
